<!--
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

https://keybase.io/sajal -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> Secure Proxy using Squid &middot; Sajal Kayan </title>

  
  <link rel="stylesheet" href="http://www.sajalkayan.com/css/poole.css">
  <link rel="stylesheet" href="http://www.sajalkayan.com/css/syntax.css">
  <link rel="stylesheet" href="http://www.sajalkayan.com/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="http://www.sajalkayan.com/post.xml" rel="alternate" type="application/rss+xml" title="Sajal Kayan" />
<script>
(function(a,b,c){function d(){var a=b.createElement(c),d=b.getElementsByTagName(c)[0];a.async=a.src="https://rum.turbobytes.com/static/rum/rum.js",d.parentNode.insertBefore(a,d)}if(a.location.protocol=="https:")return;a.addEventListener&&a.addEventListener("load",d,!1)})(window,document,"script")
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3020223-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body>

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>Sajal Kayan</h1>
      <p class="lead">
        Likes to make all the things faster.
      </p>
      <p>CTO at <a href="http://www.turbobytes.com/">TurboBytes</a></p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
        <li><a href="http://www.sajalkayan.com/about.html"> About me </a></li>
      
    </ul>

    <p>&copy; 2016. All rights reserved.  <img src="/images/cc.png" /></p>
  </div>
</div>


    <div class="content container">
<div class="post">
  <h1>Secure Proxy using Squid</h1>
  <span class="post-date">
    Sat, Jan 5, 2008
    
    <a 
      class="twitter-share-button" 
      href="https://twitter.com/share"
      data-via="sajal"
      data-text="Secure Proxy using Squid" 
      data-url="http://www.sajalkayan.com/secure-proxy-using-squid.html"
      >
      Tweet
    </a>
    <a 
      href="http://news.ycombinator.com/submit"
      class="hn-share-button"
      data-title="Secure Proxy using Squid"
      data-url="http://www.sajalkayan.com/secure-proxy-using-squid.html"
      >
      Vote on HN
    </a>
    
    
  </span>
      Had originally posted this on Friday, September 29th, 2006 during the peak of Takhsin's rampant blocking of websites and the blocking proxies were messing up often blocking un-blocked pages also.

It is very important to use a secure proxy if you browse the web from unsecure Networks.
The basic requirements are a Linux box in a location which is secure and another PC Linux or windows which may be in the unsecure location.

NOTE : Please excuse my newbieness. I do not provide any kind of waranty on this article, only hope that it may be useful or interesting to you.

For this article, the squid was setup on a CentOS based server and accessed from FC5 based notebook using Mozilla Firefox. The settings would be simillar for other distributions/ browsers.

This method is not to be used illegally to view government blocked websites. Please follow laws of the country you reside in.<!--more-->

On CentOS it is very easy to install squid using yum (note you must be root to continue with the instalation)
<blockquote><em>yum install squid</em></blockquote>
On Debian based system :-
<blockquote><em>apt-get install squid</em></blockquote>
For others/slackware :-

Download squid source file as a gzipped tar ball (squid-x.y-STABLE.tar.gz) available at http://www.squid-cache.org/ or from ftp://www.squid-cache.org/pub. Then run the following commands
<blockquote><em>tar -xvzf squid-*-src.tar.gz</em>
<em>cd squid -*</em>
<em>./configure</em>
<em>make</em>
<em>make install</em></blockquote>
This by default, will install in “/usr/local/squid”.

There are some basic configurations which you may need to edit.
By default the squid config file is located in /etc/squid/squid.conf on centos with squid installed using yum. Config file may be located at /usr/local/squid/etc/squid.conf if you have installed manually.

Start Squid on CentOS
<blockquote><em>/etc/init.d/squid start</em></blockquote>
Squid is now ready to serve as proxy only to local host and is listening on port 3128

Now you have squid listening to localhost only. We need to make a tunnel from the server to the PC.
Note for windows users reffer to <a href="http://web.archive.org/web/20070505081807/http://www.jfitz.com/tips/putty_config.html" target="_blank" title="Secure tunnel on windows using putty ">putty configuration guide</a>
to do this on a FC5 (Fedora core instructions may be similar for other distributions) be root(or superuser) and run the following command.
<blockquote><em>ssh -L 8080:localhost:3128 someserver.com -l username</em></blockquote>
Replace the someserver.com with the DNS name or IP of your newly setup proxy server.
In case the SSHD on your server listens to aa port other than port 22, you may need to enter the following command
<blockquote><em>ssh -L 8080:localhost:3128 someserver.com -p 1022 -l username</em></blockquote>
In the above example:-
8080 is a free unused port on your PC. We will tunnel this port to squid.
localhost is your PC
3128 is the port on the proxy server where squid is listening to.
someserver.com is your proxy servers hostname or IP address.
1022 is the port on your server where SSHD listens to.
username is your username on the server

After entering the ssh command, you will get a prompt asking for a password. Enter the password for ‘username’.

Open Mozilla Firefox
Click Edit the preferences. Then click on the box Connection Settings
Choose Manual proxy configuration.
Under HTTP proxy type in localhost. For port type in 8080 (change it as per your tunnel settingings)
Then click OK

You should now be able to use the Web browser to surf the net using browsing the web without fear of packets being sniffed.
This only encrypts the information exchanged between your workstation and the proxy server. The information from your proxy to the website you are browsing can still be sniffed, so to be on the safe side use https when browsing sites which support it.

      
      <div>
  Tags:  
    <a href="/tag/censorship">censorship</a> </li>
   
    <a href="/tag/linux">Linux</a> </li>
   
    <a href="/tag/proxy">proxy</a> </li>
   
    <a href="/tag/security">security</a> </li>
   
    <a href="/tag/squid">squid</a> </li>
   
    <a href="/tag/ssh">ssh</a> </li>
   
    <a href="/tag/tunnel">tunnel</a> </li>
   <br />
  Categories:  
    <a href="/category/linux">Linux</a> </li>
   
    <a href="/category/tutorials">Tutorials</a> </li>
   <br />

</div>
      <div id="disqus_thread"></div>
<script type="text/javascript">
		 
		var disqus_shortname = 'sajal';
		var disqus_title = 'Secure Proxy using Squid';
		var disqus_url = 'http://www.sajalkayan.com\/secure-proxy-using-squid.html';

		 
		(function(w, d, s) {
			function go(){
				var dsq = d.createElement(s); 
				dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
				(d.getElementsByTagName('head')[0] || d.getElementsByTagName('body')[0]).appendChild(dsq);
			}
		if (w.addEventListener) { w.addEventListener("load", go, false); }
		else if (w.attachEvent) { w.attachEvent("onload",go); }
		}(window, document, 'script'));

</script>
<script type="text/javascript">
window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
</script>
<script src="/hn.min.js" async defer></script>
<script type="text/javascript">



</script>

      
</div>
</div>

  </body>
</html>
<!--
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (GNU/Linux)

iQIcBAEBCAAGBQJWtjkaAAoJEDlkkKy/FYKP+jUQAJ9esvXnT5/qzryhmHdHZ7cp
JirFOkYtJz/81cP3tFGR71F0T8dR8U88zzyDqzeItOhpKJOB8DhsDd2X7Xz9BQdM
LxQDAtEQ2K82T88dVX6OZHLCI/Q+a/u2s46JKxhm/Jc1oQ+4axV41tWiyM58j9rw
DZzVmkC5nasaNuibhn1aD45l0uHRrtlTxAtwFbuIzxtmBOt8FmnGV4oAZm5lPLCX
JzgQhloie85rXZilil6JQh2IDjZVuYHr5Qjz10lk4x8kAcC+NPzGG/56zm4nHC7H
8i31x4197JLBZ90kJJwVBG9sxhoiST3hJ70p85pi40xBXRF3pHyzA+H5lqD0w+F4
NVy5x2k+lxd40TZvDljIKM6NKaHnCOHNcAFs4MDqQjNOBx8/st3mQtjIryMmXXlK
uQYl99hYDMOn+xnFSbn+vuzvZgXSA5fZNUP2cKmBESLXo5nSPBK6l7Ak0dt6T3Af
JrHzKMJ2gvDGUbzatOXMwGQ8CLrWVvBwEJROV8HfBEI3SZDmWzkVn/6mCG58y/7M
dY6aEBrJ4tdesyNUaOB41ECNjgchJWlaiQjZAh9whOV7lo6yaPXGfaZBBBNbZyId
T9AFBehCVuuyEQq3AMUJbt4Xbiw9LtyAz6ki/PYldStoPcOSbC3famRR9+/F2/vd
P8x9BESQVTbnPYNeHuGy
=R9ZR
-----END PGP SIGNATURE-----
-->
